C51 COMPILER V9.52.0.0   CHESS_LIB                                                         08/12/2015 12:35:32 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE CHESS_LIB
OBJECT MODULE PLACED IN .\Object\chess_lib.obj
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE user\App\chess_lib.c LARGE BROWSE INCDIR(.\user\Include) DEBUG OBJECTEXTEND
                    - PRINT(.\Lst\chess_lib.lst) TABS(2) OBJECT(.\Object\chess_lib.obj)

line level    source

   1          #ifndef CHESS_LIB
   2          #define CHESS_LIB
   3          void yiwei(int n,int *i,int *j)        /* ÔÚn·½ÏòÉÏ¶Ô×ø±ê i j ÒÆÎ» nÎª1-8·½Ïò ´ÓÓÒË³Ê±Õë¿ªÊ¼Êý */
   4          
   5          {
   6   1      
   7   1          switch(n){
   8   2      
   9   2          case 1: *i+=1; break;
  10   2      
  11   2          case 2: *i+=1; *j+=1; break;
  12   2      
  13   2          case 3: *j+=1; break;
  14   2      
  15   2          case 4: *i-=1; *j+=1; break;
  16   2      
  17   2          case 5: *i-=1; break;
  18   2      
  19   2          case 6: *i-=1; *j-=1; break;
  20   2      
  21   2          case 7: *j-=1; break;
  22   2      
  23   2          case 8: *i+=1; *j-=1; break;
  24   2      
  25   2          }
  26   1      
  27   1      }
  28          int qixing(int n,int p,int q)            /* ·µ»Ø¿Õµãp qÔÚn·½ÏòÉÏµÄÆåÐÍºÅ nÎª1-8·½Ïò ´ÓÓÒË³Ê±Õë¿ªÊ¼Êý */ 
  29          
  30          {
  31   1      
  32   1          int k,m=0;  /* ÆåÐÍºÅ×¢½â:  ¼º»î000-003 ¼º³å010-013 ¶Ô»î100-103 ¶Ô³å110-113 ¼º¿Õ»î020-023 ¼º¿Õ³å030-03
             -3 ¶Ô¿Õ»î120-123 ¶Ô¿Õ³å130-133 ¿Õ-1 ±ß½ç³å-2 ±ß½ç¿Õ³å-3*/
  33   1      
  34   1          yiwei(n,&p,&q);
  35   1      
  36   1          if(p<0||p>14||q<0||q>14) k=-2;                                      /* ±ß½ç³åÆåÐÍ */
  37   1      
  38   1          switch(qipan[q][p]){
*** ERROR C202 IN LINE 38 OF user\App\chess_lib.c: 'qipan': undefined identifier
  39   2      
  40   2              case COM:{
*** ERROR C202 IN LINE 40 OF user\App\chess_lib.c: 'COM': undefined identifier
  41   3      
  42   3                          m++; yiwei(n,&p,&q);
  43   3      
  44   3                          if(p<0||p>14||q<0||q>14) { k=m+9; return k; }
  45   3      
  46   3                          while(qipan[q][p]==COM) { m++; yiwei(n,&p,&q); if(p<0||p>14||q<0||q>14) { k=m+9; retur
             -n k; } }
*** ERROR C202 IN LINE 46 OF user\App\chess_lib.c: 'qipan': undefined identifier
  47   3      
  48   3                          if(qipan[q][p]==SPA) k=m-1;                         /* ¼º·½»îÆåÐÍ */
*** ERROR C202 IN LINE 48 OF user\App\chess_lib.c: 'qipan': undefined identifier
C51 COMPILER V9.52.0.0   CHESS_LIB                                                         08/12/2015 12:35:32 PAGE 2   

  49   3      
  50   3                           else k=m+9;                                         /* ¼º·½³åÆåÐÍ */
  51   3      
  52   3                       }break;
  53   2      
  54   2              case MAN:{
*** ERROR C202 IN LINE 54 OF user\App\chess_lib.c: 'MAN': undefined identifier
  55   3      
  56   3                          m++; yiwei(n,&p,&q);
  57   3      
  58   3                          if(p<0||p>14||q<0||q>14) { k=m+109; return k; }
  59   3      
  60   3                          while(qipan[q][p]==MAN) { m++; yiwei(n,&p,&q); if(p<0||p>14||q<0||q>14) { k=m+109; ret
             -urn k; } }
*** ERROR C202 IN LINE 60 OF user\App\chess_lib.c: 'qipan': undefined identifier
  61   3      
  62   3                          if(qipan[q][p]==SPA) k=m+99;                         /* ¶Ô·½»îÆåÐÍ */
*** ERROR C202 IN LINE 62 OF user\App\chess_lib.c: 'qipan': undefined identifier
  63   3      
  64   3                          else k=m+109;                                        /* ¶Ô·½³åÆåÐÍ */
  65   3      
  66   3                       }break;
  67   2      
  68   2              case SPA:{
*** ERROR C202 IN LINE 68 OF user\App\chess_lib.c: 'SPA': undefined identifier
  69   3      
  70   3                          yiwei(n,&p,&q);
  71   3      
  72   3                          if(p<0||p>14||q<0||q>14) { k=-3; return k; }         /* ±ß½ç¿Õ³åÆåÐÍ */
  73   3      
  74   3                          switch(qipan[q][p]){
*** ERROR C202 IN LINE 74 OF user\App\chess_lib.c: 'qipan': undefined identifier
  75   4      
  76   4                          case COM:{
*** ERROR C202 IN LINE 76 OF user\App\chess_lib.c: 'COM': undefined identifier
  77   5      
  78   5                                      m++; yiwei(n,&p,&q);
  79   5      
  80   5                                      if(p<0||p>14||q<0||q>14) { k=m+29; return k; }
  81   5      
  82   5                                      while(qipan[q][p]==COM) { m++; yiwei(n,&p,&q); if(p<0||p>14||q<0||q>14) { 
             -k=m+29; return k; } }
*** ERROR C202 IN LINE 82 OF user\App\chess_lib.c: 'qipan': undefined identifier
  83   5      
  84   5                                      if(qipan[q][p]==SPA) k=m+19;                      /* ¼º·½¿Õ»îÆåÐÍ */
*** ERROR C202 IN LINE 84 OF user\App\chess_lib.c: 'qipan': undefined identifier
  85   5      
  86   5                                      else k=m+29;                                      /* ¼º·½¿Õ³åÆåÐÍ */
  87   5      
  88   5                                   }break;
  89   4      
  90   4                          case MAN:{
*** ERROR C202 IN LINE 90 OF user\App\chess_lib.c: 'MAN': undefined identifier
  91   5      
  92   5                                      m++; yiwei(n,&p,&q);
  93   5      
  94   5                                      if(p<0||p>14||q<0||q>14) { k=m+129; return k; }
  95   5      
  96   5                                      while(qipan[q][p]==MAN) { m++; yiwei(n,&p,&q); if(p<0||p>14||q<0||q>14) { 
             -k=m+129; return k; } }           
*** ERROR C202 IN LINE 96 OF user\App\chess_lib.c: 'qipan': undefined identifier
  97   5      
C51 COMPILER V9.52.0.0   CHESS_LIB                                                         08/12/2015 12:35:32 PAGE 3   

  98   5                                      if(qipan[q][p]==SPA) k=m+119;                     /* ¶Ô·½¿Õ»îÆåÐÍ */
*** ERROR C202 IN LINE 98 OF user\App\chess_lib.c: 'qipan': undefined identifier
  99   5      
 100   5                                      else k=m+129;                                     /* ¶Ô·½¿Õ³åÆåÐÍ */ 
 101   5      
 102   5                                   }break;
 103   4      
 104   4                          case SPA: k=-1; break;                                         /* ¿ÕÆåÐÍ */
*** ERROR C202 IN LINE 104 OF user\App\chess_lib.c: 'SPA': undefined identifier
 105   4      
 106   4                          }
 107   3      
 108   3                      }break;
 109   2      
 110   2          }
 111   1      
 112   1          return k;
 113   1      
 114   1      }
 115          int value(int p,int q) /* ¼ÆËã¿Õµãp qµÄ¼ÛÖµ ÒÔk·µ»Ø */ 
 116          
 117          {
 118   1        
 119   1      
 120   1          int n=1,k=0,k1,k2,K1,K2,X1,Y1,Z1,X2,Y2,Z2,temp;  
 121   1      
 122   1          int a[2][4][4]={40,400,3000,10000,6,10,600,10000,20,120,200,0,6,10,500,0,30,300,2500,5000,2,8,300,8000
             -,26,160,0,0,4,20,300,0};
 123   1      
 124   1                 /* Êý×éaÖÐ´¢´æ¼º·½ºÍ¶Ô·½¹²32ÖÖÆåÐÍµÄÖµ  ¼º·½0¶Ô·½1    »î0³å1¿Õ»î2¿Õ³å3    ×ÓÊý0-3£¨0±íÊ¾1¸ö×Ó£¬
             -3±íÊ¾4¸ö×Ó£© */
 125   1      
 126   1          while(n!=5){
 127   2      
 128   2              k1=qixing(n,p,q); n+=4;            /* k1,k2Îª2¸ö·´·½ÏòµÄÆåÐÍ±àºÅ */
 129   2      
 130   2              k2=qixing(n,p,q); n-=3;
 131   2      
 132   2              if(k1>k2) { temp=k1; k1=k2; k2=temp; }  /* Ê¹±àºÅÐ¡µÄÎªk1,´óµÄÎªk2 */
 133   2      
 134   2              K1=k1; K2=k2;       /* K1 K2´¢´æk1 k2µÄ±àºÅ */
 135   2      
 136   2              Z1=k1%10; Z2=k2%10; k1/=10; k2/=10; Y1=k1%10; Y2=k2%10; k1/=10; k2/=10; X1=k1%10; X2=k2%10;
 137   2      
 138   2                  /* X Y Z·Ö±ð±íÊ¾ ¼º·½0¶Ô·½1    »î0³å1¿Õ»î2¿Õ³å3    ×ÓÊý0-3£¨0±íÊ¾1¸ö×Ó£¬3±íÊ¾4¸ö×Ó£© */
 139   2      
 140   2              if(K1==-1) { if(K2<0) { k+=0; continue; } else k+=a[X2][Y2][Z2]+5; continue;  };    /* ¿ÕÆåÐÍandÆä
             -Ëû */
 141   2      
 142   2              if(K1==-2) { if(K2<0) { k+=0; continue; } else k+=a[X2][Y2][Z2]/2; continue; };       /* ±ß½ç³åÆåÐ
             -ÍandÆäËû */ 
 143   2      
 144   2              if(K1==-3) { if(K2<0) { k+=0; continue; } else k+=a[X2][Y2][Z2]/3; continue; };    /* ±ß½ç¿Õ³åÆåÐÍ
             -andÆäËû */ 
 145   2      
 146   2              if(((K1>-1&&K1<4)&&((K2>-1&&K2<4)||(K2>9&&K2<14)))||((K1>99&&K1<104)&&((K2>99&&K2<104)||(K2>109&&K
             -2<114)))){
 147   3      
 148   3                  /* ¼º»î¼º»î ¼º»î¼º³å ¶Ô»î¶Ô»î ¶Ô»î¶Ô³å µÄÆåÐÍ¸³Öµ*/
 149   3      
 150   3                  if(Z1+Z2>=2) { k+=a[X2][Y2][3]; continue; }
 151   3      
C51 COMPILER V9.52.0.0   CHESS_LIB                                                         08/12/2015 12:35:32 PAGE 4   

 152   3                  else { k+=a[X2][Y2][Z1+Z2+1]; continue; }
 153   3      
 154   3              }
 155   2      
 156   2              if(((K1>9&&K1<14)&&(K2>9&&K2<14))||((K1>109&&K1<114)&&(K2>109&&K2<114))){
 157   3      
 158   3                  /* ¼º³å¼º³å ¶Ô³å¶Ô³å µÄÆåÐÍ¸³Öµ*/
 159   3      
 160   3                  if(Z1+Z2>=2) { k+=10000; continue; }
 161   3      
 162   3                  else { k+=0; continue; }
 163   3      
 164   3              }
 165   2      
 166   2              if(((K1>-1&&K1<4)&&((K2>99&&K2<104)||(K2>109&&K2<114)))||((K1>9&&K1<14)&&((K2>99&&K2<104)||(K2>109
             -&&K2<114)))){
 167   3      
 168   3                  /* ¼º»î¶Ô»î ¼º»î¶Ô³å ¼º³å¶Ô»î ¼º³å¶Ô³å µÄÆåÐÍ¸³Öµ*/
 169   3      
 170   3                  if(Z1==3||Z2==3) { k+=10000; continue; }
 171   3      
 172   3                  else { k+=a[X2][Y2][Z2]+a[X1][Y1][Z1]/4; continue; } 
 173   3      
 174   3              }
 175   2      
 176   2              else  { k+=a[X1][Y1][Z1]+a[X2][Y2][Z2]; continue;  }    /* ÆäËûÆåÐÍµÄ¸³Öµ */
 177   2      
 178   2          }
 179   1      
 180   1          return k;
 181   1      
 182   1      }
 183          void PCTurn(int *x,int *y)           /* µçÄÔÏÂ×Ó *p *q·µ»ØÏÂ×Ó×ø±ê */
 184          
 185          {
 186   1      
 187   1          int i,j,k,max=0,I,J;        /* I JÎªÏÂµã×ø±ê */
 188   1      
 189   1          for(j=0;j<15;j++)
 190   1      
 191   1              for(i=0;i<15;i++)
 192   1      
 193   1                  if(qipan[j][i]==SPA){      /* Àú±éÆåÅÌ£¬Óöµ½¿ÕµãÔò¼ÆËã¼ÛÖµ£¬È¡×î´ó¼ÛÖµµãÏÂ×Ó¡£ */
*** ERROR C202 IN LINE 193 OF user\App\chess_lib.c: 'qipan': undefined identifier
 194   2      
 195   2                      k=value(i,j);
 196   2      
 197   2                     if(k>=max) { I=i; J=j; max=k; }
 198   2      
 199   2                  }
 200   1      
 201   1          *x=I; *y=J;
 202   1      
 203   1      }
 204          static int DirectionValue( int * piX, int * piY, int iDirection ){
 205   1      
 206   1          switch( iDirection ){
 207   2      
 208   2          case 0:
 209   2      
 210   2              --*piX;
 211   2      
C51 COMPILER V9.52.0.0   CHESS_LIB                                                         08/12/2015 12:35:32 PAGE 5   

 212   2              break;
 213   2      
 214   2          case 4:
 215   2      
 216   2              ++*piX;
 217   2      
 218   2              break;
 219   2      
 220   2          case 1:
 221   2      
 222   2              --*piY;
 223   2      
 224   2              break;
 225   2      
 226   2          case 5:
 227   2      
 228   2              ++*piY;
 229   2      
 230   2              break;
 231   2      
 232   2          case 2:
 233   2      
 234   2              --*piX; --*piY;
 235   2      
 236   2              break;
 237   2      
 238   2          case 6:
 239   2      
 240   2              ++*piX; ++*piY;
 241   2      
 242   2              break;
 243   2      
 244   2          case 3:
 245   2      
 246   2              --*piX; ++*piY;
 247   2      
 248   2              break;
 249   2      
 250   2          case 7:
 251   2      
 252   2               ++*piX; --*piY;
 253   2      
 254   2              break;
 255   2      
 256   2          }
 257   1      
 258   1          if( (*piX >= 0 && *piX <= ORDEX-1) && (*piY >= 0 && *piY <= ORDEX-1) )
*** ERROR C202 IN LINE 258 OF user\App\chess_lib.c: 'ORDEX': undefined identifier
 259   1      
 260   1              return 1;
 261   1      
 262   1          else return 0;
 263   1      
 264   1      }
 265          static int SubVictory( ScmPiece * pScmPiece, int iDirection )
*** ERROR C141 IN LINE 265 OF user\App\chess_lib.c: syntax error near '*', expected ')'
 266          {
 267   1      
 268   1          int iX = pScmPiece->iX;
*** ERROR C202 IN LINE 268 OF user\App\chess_lib.c: 'pScmPiece': undefined identifier
 269   1      
 270   1          int iY = pScmPiece->iY;
C51 COMPILER V9.52.0.0   CHESS_LIB                                                         08/12/2015 12:35:32 PAGE 6   

*** ERROR C202 IN LINE 270 OF user\App\chess_lib.c: 'pScmPiece': undefined identifier
 271   1      
 272   1          int iPieceCount = 1;
 273   1      
 274   1          while( DirectionValue( &iX, &iY, iDirection ) && qipan[iX][iY] ==  pScmPiece->iFlag )
*** ERROR C202 IN LINE 274 OF user\App\chess_lib.c: 'iDirection': undefined identifier
 275   1      
 276   1              ++iPieceCount;
 277   1      
 278   1          iX = pScmPiece->iX;
*** ERROR C202 IN LINE 278 OF user\App\chess_lib.c: 'pScmPiece': undefined identifier
 279   1      
 280   1          iY = pScmPiece->iY;
*** ERROR C202 IN LINE 280 OF user\App\chess_lib.c: 'pScmPiece': undefined identifier
 281   1      
 282   1          while( DirectionValue( &iX, &iY, iDirection+4 ) && qipan[iX][iY] ==  pScmPiece->iFlag )
*** ERROR C202 IN LINE 282 OF user\App\chess_lib.c: 'iDirection': undefined identifier
 283   1      
 284   1              ++iPieceCount;
 285   1      
 286   1          return iPieceCount;
 287   1      
 288   1      }
 289          int Victory( ScmPiece * pScmPiece )      /* ÅÐ¶ÏÊ¤Àû p qÎªÅÐ¶Ïµã×ø±ê£¬Ê¤Àû·µ»Ø1£¬·ñÔò·µ»Ø0 */
*** ERROR C141 IN LINE 289 OF user\App\chess_lib.c: syntax error near '*', expected ')'
 290          
 291          {
 292   1      
 293   1          int iDirection = 0;
 294   1      
 295   1          while( iDirection < 4 )
 296   1      
 297   1              if( SubVictory( pScmPiece, iDirection++ ) >= 5 )
*** ERROR C202 IN LINE 297 OF user\App\chess_lib.c: 'pScmPiece': undefined identifier
 298   1      
 299   1                  return 1;
 300   1      
 301   1          return 0;
 302   1      
 303   1      }
 304          
 305          #endif

C51 COMPILATION COMPLETE.  0 WARNING(S),  27 ERROR(S)
