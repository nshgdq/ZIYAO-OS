C51 COMPILER V9.00   ATCMD                                                                 06/19/2015 11:00:37 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE ATCMD
OBJECT MODULE PLACED IN .\Object\ATCmd.obj
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE user\ATCmd\ATCmd.c LARGE BROWSE INCDIR(.\user\LCD;.\user\W25Qxx;.\user;.\us
                    -er\TOUCH;.\user\flash;.\user\ds1302;.\user\timer;.\user\GUI;.\user\ds18b20;.\user\uart;.\user\ATCmd) DEBUG OBJECTEXTEND 
                    -PRINT(.\Lst\ATCmd.lst) OBJECT(.\Object\ATCmd.obj)

line level    source

   1          #include "ATCmd.h"
   2          #include "gui.h"
   3          #include<string.h>
   4          #define ATNUM 5         //AT指令的数量
   5          /**************************
   6          AT指令的类型的结构体            
   7          第一成员为指令串 (不超过10个字符，含\0)
   8          第二成员为对应指令的函数名      
   9          ***************************/
  10          typedef struct           
  11          {
  12                  char at_name[10];
  13                  void (*at_fun)();
  14          }at_cmd;
  15          at_cmd code at[ATNUM]=                  //AT指令列表
  16          {
  17                  {"desktop",desktop},
  18                  {"startch",start_check},
  19                  {"picbox",picbox},
  20                  {"tempert",tempert},
  21                  {"calendar",calendar}
  22          };
  23          /******************************
  24          函数名：AT_DO
  25          作用：查阅AT指令串并执行对应函数
  26          参数：at_str 串口接收到的AT指令串
  27          ********************************/
  28          void AT_DO(u8 *at_str)
  29          {
  30   1              u8 i;
  31   1              at_str=at_str+3;//清除指令头3个字符"AT+"
  32   1              for(i=0;i<ATNUM;i++)
  33   1              {
  34   2                      if(strcmp(at_str,at[i].at_name)==0) at[i].at_fun();
  35   2              }
  36   1      }
  37          /***********************************
  38          函数名：IsATCmd
  39          作用:检查字符串是否AT指令(串开头三个字符是AT+)
  40          返回值：1 是   0 不是
  41          *************************************/
  42          bit IsATCmd(u8 *str)
  43          {
  44   1              if(*str=='A'&&*(str+1)=='T') return 1;
  45   1              return 0;
  46   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    136    ----
   CONSTANT SIZE    =     65    ----
   XDATA SIZE       =   ----       4
   PDATA SIZE       =   ----    ----
C51 COMPILER V9.00   ATCMD                                                                 06/19/2015 11:00:37 PAGE 2   

   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
